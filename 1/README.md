# use-gplearn-to-generate-CTA-factor
本文档使用gplearn模型进行因子生成。  
在适应度函数定义方面，本文档采用收益回撤比进行定义。如何根据遗传规划算法得到因子值投资的细节参见simple-backtest部分。  

## 主要文档说明
* backtest.py 向量化回测框架
* gp_basic.py 该文档是对遗传规划算法的演示文档。在该文档中，演示了遗传规划之下是如何逐渐逼近真实函数的。这部分为遗传规划中相关过程提供参照。  
* gp_data_enlarge.py 扩充数据集的方法
* gp_func.py 数据生成的函数集
* gp_main.py 该文档是通过遗传规划生成因子的详细过程。因为在进行这一操作时需要输入参数，因子该文档被最终设计为半自动化的因子生成过程。具体地，每次开始遗传规划前首先给定相关参数，之后根据训练集和测试集回测结果判断是否保存结果，以及是否进入下次循环（输出结果保存在gp_rslt中）。  

## 模型效果展示
![回测效果](./result/backtest/%20[0.0,%200.0].png)
回测效果如上  
虽然在测试集内保持了收益，但是因子效果仍有进一步提升空间

## 版本历史说明
该文档共有三个版本。

230215 版本1通过input函数实现半自动化调参和结果保存，方便使用。
 - 预计单次回测及生成统计量运行时间为1.6s  
 - 预计单次回测及生成统计量和图表运行时间为4.4s

230215 版本2需要手动在gp_main.py中调整选取参数，方便学习。
 - 预计单次回测及生成统计量运行时间为1.6s  
 - 预计单次回测及生成统计量和图表运行时间为4.4s  

230830 版本3修改回测系统和因子生成方式
- 删去原有回测框架
- 修改主文件形式和因子生成方法

## 改进方向
- 改为多标的
- 增加函数集
- 探究如何生成彼此低相关的因子